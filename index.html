<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com -->
<!--  Last Published: Sun Feb 05 2017 13:02:20 GMT+0000 (UTC)  -->
<html data-wf-page="58963bc47e7eea00192d6891" data-wf-site="58963bc47e7eea00192d6890">
<head>
  <meta charset="utf-8">
  <title>flowtyper.com</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/flowtyper.webflow.css" rel="stylesheet" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"></script>
  <script type="text/javascript">
    WebFont.load({
      google: {
        families: ["Lato:100,100italic,300,300italic,400,400italic,700,700italic,900,900italic","Special Elite:regular","Cutive:regular:latin,latin-ext","Josefin Sans:100,100italic,300,300italic,regular,italic,600,600italic,700,700italic"]
      }
    });
  </script>
  <script src="js/modernizr.js" type="text/javascript"></script>
  <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="images/favicon-2.png" rel="apple-touch-icon">
</head>
<body>
  <div class="background"></div>
  <div class="menu-section">
    <div class="home-container">
      <div class="home-menu" data-ix="load-home">
        <a class="menu-link w-inline-block" href="index.html">
          <div class="_1 flowtyper">flow</div>
          <div class="_2 flowtyper">typer.</div>
        </a>
        <a class="_3 menu-link w-inline-block" href="#">
          <div class="menu-link-line"></div>
          <div class="menu-link-line"></div>
          <div class="_2 menu-link-line"></div>
        </a>
      </div>
    </div>
  </div>
  <div class="flow-list-section">
    <div class="page-list">
      <div class="new-flow-container w-container">
        <div class="new-flow-link">
          <a onClick="addText()" class="new-flow w-inline-block" data-ix="new-flow" href="flow.html">
            <div>&nbsp;new flow&nbsp;</div>
          </a>
        </div>
      </div>
    </div>
    <div id="listDiv" class="_2 home-container">
      <div class="owner-parent">
        <div class="journal-title">
          <div>Leia's Journal</div>
        </div>
      </div>
    </div>
        <div class="the-flow" data-ix="the-flow">
      <div class="the-flow-box">
        <h1 class="the-flow-title" id="dateTitle">12/12/17</h1>
        <div class="the-flow-text w-richtext">
          <p id="longText">Sample text</p>
        </div>
      </div>
      <div class="x" data-ix="x">
        <div class="white-line"></div>
        <div class="_2 white-line"></div>
      </div>
    </div>
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js" type="text/javascript"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
    <script>
  function addText(){

	  localStorage.setItem('flow'+localStorage.getItem('curId'), 'I like trains');
    var date = new Date();
    var dateString = (date.getMonth()+1)+"/"+date.getDate()+"/"+date.getFullYear();
    console.log(dateString);
    localStorage.setItem('flowdate'+localStorage.getItem('curId'), dateString);
    localStorage.setItem('curId', Number(localStorage.getItem('curId'))+1);
  }
  
  document.addEventListener("DOMContentLoaded", function() {
   init();
  });

  function init() {
      //CLEAR LOCAL STORAGE
      //USE WITH CAUTION

    //localStorage.clear();

      //UNCOMMENT SOON
      //SERIOUSLY


    if (localStorage.getItem('curId') === null)
      localStorage.setItem('curId', 0);
    loopThruStorage();
  }
  
  function loopThruStorage(){
    var num = Number(localStorage.getItem('curId')) - 1;
    do {
      var text = localStorage.getItem('flow'+num);
      var date = localStorage.getItem('flowdate'+num);
      
      if (text === null || date === null)
        break;

      console.log(Number(localStorage.getItem('curId')));
      var parent = document.getElementById('listDiv');
      appendStringAsNodes(document.getElementById("listDiv"), '<div class="flow-item"> <a onClick="setParagraphText(this)" id="'+ num + '" class="flow-link w-inline-block" data-ix="flow-link" href="#"> <div class="flow-item w-row"> <div class="date w-col w-col-4"> <div id="date' + num + '">12/12/17</div> </div> <div class="title w-col w-col-8"> <div id="text' + num + '">Privet Thomas Kak Dela? :D</div> </div> </div> </a> </div>');
      console.log(date);

      var newText = text.substring(0, 25);
      if (newText.length < text.length)
        newText += "...";
      
      document.getElementById('text'+num).innerText = newText;
      document.getElementById('date'+num).innerText = date;
      num--;
    }
    while (text !== null || date !== null);
  }

  function setParagraphText(element) {
      var num = element.getAttribute("id");
      document.getElementById('longText').innerText = localStorage.getItem('flow'+num);
      document.getElementById('dateTitle').innerText = localStorage.getItem('flowdate'+num);
  }
  
  function appendStringAsNodes(element, html) {
    var frag = document.createDocumentFragment(),
        tmp = document.createElement('body'), child;
    tmp.innerHTML = html;
    // Append elements in a loop to a DocumentFragment, so that the browser does
    // not re-render the document for each node
    while (child = tmp.firstChild) {
        frag.appendChild(child);
    }
    element.appendChild(frag); // Now, append all elements at once
    frag = tmp = null;
}
</script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
</body>
</html>